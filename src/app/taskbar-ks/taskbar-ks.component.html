<body>
  <header id="header" class="d-flex align-items-center">
    <div class="welcome">
      Xin chào,
      <label class="user">{{fullname}}</label><br />

    </div>

    <nav id="navbar" class="navbar">
      <ul>
        <li><a class="a" (click)="themLuatMoi()">Thêm luật</a></li>
        <li><a class="ab" (click)="themBenhMoi()">Thêm Bệnh</a></li>

        <li class="dropdown">

          <a (click)="logout()"><span>Đăng xuất</span> <i class="bi bi-chevron-down"></i></a>
        </li>
      </ul>
      <i class="bi bi-list mobile-nav-toggle"></i>
    </nav><!-- .navbar -->
  </header>
  <!-- ======= Hero Section ======= -->
  <br>
  <br>
  <section *ngIf="themLuat" class="a">

  </section>

  <section *ngIf="themBenh " class="ab">
    <div class="flex-container">
      <div *ngIf="themBenh" class="container" data-aos="zoom-out" data-aos-delay="100">
        <div class="tables-container">
          <div class="table">
            <div *ngIf="benhs">
              <h2>Danh Sách Các Bệnh Mới</h2>

              <table class="tb">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Tên Bệnh</th>
                    <th>Loại Hệ</th>
                    <th>Trạng Thái</th>
                    <th>ID Chuyên Gia</th>
                    <th>Tên Chuyên Gia</th>
                    <th>Ghi chú</th>
                    <th>Thêm Bệnh</th>
                  </tr>
                </thead>
                <tbody>
                  <ng-container *ngFor="let benh of benhs">
                    <tr *ngIf="benh.trang_thai == 1" (click)="selectBenh(benh); selectBenh1(benh.ma_benh_moi)"
                      [ngClass]="{'selected-row': benh === selectedBenh, 'hover-row': benh === hoveredBenh}"
                      (mouseenter)="hoveredBenh = benh" (mouseleave)="hoveredBenh = null">
                      <!-- Các ô dữ liệu -->
                      <td>{{ benh.ma_benh_moi }}</td>
                      <td>{{ benh.ten_benh_moi }}</td>
                      <td>
                        <ng-container *ngIf="benh.loai_he == 1; else otherType">{{ 'Hệ hô hấp trên' }}</ng-container>
                        <ng-template #otherType>{{ 'Hệ hô hấp dưới' }}</ng-template>
                      </td>
                      <td>Đã Sửa</td>
                      <td>{{ benh.userEntity.id_user }}</td>
                      <td>{{ benh.userEntity.fullname }}</td>
                      <td>{{ benh.ghi_chu }}</td>
                      <td>
                        <button *ngIf="selectedBenh && selectedBenh.ma_benh_moi === benh.ma_benh_moi && benh.ghi_chu === 'Chưa thêm vào CSDL'"
                          (click)="showNewBenhDetails(); isAddNewBenhClicked = true;">Thêm bệnh mới</button>
                        <ng-container *ngIf="!selectedBenh || (selectedBenh && selectedBenh.ma_benh_moi !== benh.ma_benh_moi)">
                          Có thể thêm
                        </ng-container>
                      </td>
                    </tr>
                  </ng-container>
                </tbody>
              </table>

            </div>
          </div>

        </div>
        <div class="tables-container" *ngIf="selectedBenh1">
          <div class="table">
            <div *ngIf="listTrieuChung">
              <h2>Danh Sách Trieu Chứng</h2>

              <table class="tb">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Tên Triệu Chứng</th>
                    <th>Check</th>
                    <th>Thêm Triệu Chứng</th>

                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let benh of listTrieuChung, let i=index"
                    [ngClass]="{'selected-row': benh === selectedBenh, 'hover-row': benh === hoveredBenh}"
                    (mouseenter)="hoveredBenh = benh" (mouseleave)="hoveredBenh = null"
                    (click)="showTrieuChung && !benh.isClicked && selectTrieuChung(benh)">

                    <td>{{benh[0]}}</td>
                    <td>
                      <span *ngIf="!benh.isEditing">{{ benh[1] }}</span>
                      <input *ngIf="benh.isEditing" type="text" [(ngModel)]="benh[1]">

                    </td>
                    <td>
                      <span>
                        {{ check[i] === null ? 'TC không tồn tại' : (check[i] != null ? 'Mã TC trong CSDL: '+check[i] :
                        'Other value') }}
                        <!-- Điều chỉnh 'N/A', '7', 'Other value' theo nhu cầu -->
                      </span>
                    </td>
                    <!-- ... -->
                    <td>
                      <span *ngIf="check[i] == null">
                        <button *ngIf="isAddNewBenhClicked && !benh.isClicked" (click)="selectTrieuChung(benh)">Chọn</button>
                        <span *ngIf="benh.isClicked">Đã Chọn</span> <!-- Nội dung "Đã Chọn" -->
                      </span>
                    </td>
                    <!-- ... -->



                  </tr>

                </tbody>
              </table>

            </div>

          </div>

          <!-- <button (click)="showNewBenhDetails()" >Thêm bệnh mới</button> -->


          <div *ngIf="selectedBenh12">
            <div *ngIf="newBenh">
              <h2>Thông tin bệnh mới</h2>
              <table class="new-tb">
                <thead>
                  <tr>
                    <th>Tên Bệnh Mới</th>
                    <td>Tên TC mới</td>
                    <!-- cần thêm cột loại hệ ở đây -->
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let trieuChung of selectedTrieuChung">
                    <td>{{ trieuChung.tenBenh }}</td>
                    <td>{{trieuChung.tenTrieuChung}}</td>

                  </tr>
                </tbody>
              </table>
              <button (click)="SaveNewBenh()">Lưu</button>
              <!-- thêm phần hỏi xem có chắc chắn lưu không -->
              <!-- Bảng bệnh mới thêm cột xem đã lưu vào csdl chính chưa -->
              <!-- cg gửi bệnh mới đến thì thêm 1 trường gửi vào mặc định là chưa thêm vào csdl -->
              <!-- khi nhấn button lưu ở trên thì gửi 1 trường mặc định vào bảng bệnh mới là đã lưu vào cơ sở dữ liệu -->
            </div>
          </div>


        </div>
      </div>
    </div>
  </section>





  <!-- End Hero -->

</body>